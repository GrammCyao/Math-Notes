%V20231216
\ProvidesPackage{HsinMathPac}


\RequirePackage{bm}%board math
\RequirePackage{amssymb, amsmath, amsthm, mathrsfs}


%draw
\RequirePackage{tikz-cd}
\RequirePackage[tikz]{mdframed}
\usepackage{tcolorbox}
\usetikzlibrary{patterns}


%Other Settings
%    \makeatletter%公式行间距调整
%    \renewcommand\normalsize{
%       \@setfontsize\normalsize\@xpt\@xiipt
%       \abovedisplayskip 3\p@ \@plus2\p@ \@minus2\p@
%       \abovedisplayshortskip \z@ \@plus3\p@
%       \belowdisplayshortskip 3\p@ \@plus2\p@ \@minus2\p@
%       \belowdisplayskip \abovedisplayskip
%       \let\@listi\@listI}
%    \makeatother

\allowdisplaybreaks[4]%公式换页,强度从0-4.
\newcommand{\remark}{\vspace{.5em}\noindent\textbf{Remark.}~}


%计数器

\newcounter{Proposition}[section]
\renewcommand{\theProposition}{\thesection.\arabic{Proposition}}
\titleformat{\chapter}[display]{\bfseries\Large}{\filright\MakeUppercase{\chaptertitlename} \huge\arabic{chapter}}{2ex}{\filright\LARGE}
\titleformat{\section}{\normalfont}{\filright\bfseries\Large\S\thesection}{8pt}{\Large\bfseries}
%\usepackage{fontspec}

\titleformat{\chapter}[display]{\bfseries\Large}{\filright\MakeUppercase{\chaptertitlename}\Huge\Roman{chapter}}{4ex}{\titlerule[1pt]\vspace{1pt}\titlerule\vspace{1pc}\filright\huge}[\vspace{2ex}\titlerule]

%\titleformat{\section}[frame]{\normalfont}{\filright\bfseries\fbox\thesection\enspace}{8pt}{\Large\bfseries\hspace{2.5em}}


%math environment

\newtheoremstyle{defstyle}% ⟨name⟩
{0em}% ⟨Space above⟩
{0pt}% ⟨Space below⟩
{\upshape}% ⟨Body font⟩
{}% ⟨Indent amount⟩
{\bfseries}% ⟨Theorem head font⟩
{.}% ⟨Punctuation after theorem head⟩
{.5em}% ⟨Space after theorem head⟩
{}% ⟨Theorem head spec (can be left empty, meaning ‘normal’)⟩
\theoremstyle{defstyle}

%Style of environment
\mdfdefinestyle{axiomstyle}{%Axiom
    outerlinewidth=1, roundcorner=10pt, leftmargin=40, rightmargin=40,%
    backgroundcolor=yellow!20, outerlinecolor=red!70!black,%
    innertopmargin=.5em, skipabove=1em,%
    splittopskip=\topskip
}

\mdfdefinestyle{definitionstyle}{%Definition
    outerlinewidth=1, roundcorner=10pt, leftmargin=40, rightmargin=40,%
    backgroundcolor=yellow!40, outerlinecolor=red!70!black,%
    innertopmargin=.5em, skipabove=1em,%
    splittopskip = \topskip
}

\mdfdefinestyle{propositionstyle}{%Proposition,Lemma,Theorem,Corollary
    outerlinewidth=1, roundcorner=10pt, leftmargin=40, rightmargin = 40,%
    backgroundcolor = blue!10, outerlinecolor = red!70!black,innertopmargin = .5em, skipabove = 1.em, splittopskip = \topskip
}





\newtheorem*{pseudoaxiom}{Pseudo-Axiom}
\surroundwithmdframed[style=axiomstyle]{pseudoaxiom}

\newmdtheoremenv[style=axiomstyle]{axiom}{Axiom}[chapter]
\newmdtheoremenv[style=definitionstyle]{definition}{Definition}[section]
\newmdtheoremenv[style=axiomstyle]{notation}{Notation}[definition]
\newmdtheoremenv[outerlinewidth = 1, roundcorner = 10pt, leftmargin = 40, rightmargin = 40, backgroundcolor = brown!15, outerlinecolor = red!70!black, innertopmargin = .5em, skipabove = 1.em, splittopskip = \topskip ]{example}{Example}[definition]

\newtheoremstyle{thmstyle}% ⟨name⟩
{0.em}% ⟨Space above⟩
{0pt}% ⟨Space below⟩
{\itshape}% ⟨Body font⟩
{}% ⟨Indent amount⟩
{\bfseries}% ⟨Theorem head font⟩
{.}% ⟨Punctuation after theorem head⟩
{.5em}% ⟨Space after theorem head⟩
{}% ⟨Theorem head spec (can be left empty, meaning ‘normal’)⟩
\theoremstyle{thmstyle}

%Proposition
\newmdtheoremenv[style=propositionstyle]{proposition}[definition]{Proposition}

%Theorem
\newmdtheoremenv[outerlinewidth = 1, roundcorner = 10pt, leftmargin = 40, rightmargin = 40, backgroundcolor = blue!10, outerlinecolor = red!70!black, innertopmargin = .5em, skipabove = 1.em, splittopskip = \topskip,]{theorem}[definition]{Theorem}

%Lemma
\newmdtheoremenv[outerlinewidth = 1, roundcorner = 10pt, leftmargin = 40, rightmargin = 40, backgroundcolor = blue!10, outerlinecolor = red!70!black, innertopmargin = .5em, skipabove = 1.em, splittopskip = \topskip ]{lemma}[definition]{Lemma}

%Corollary
\newmdtheoremenv[outerlinewidth = 1, roundcorner = 10pt, leftmargin = 40, rightmargin = 40, backgroundcolor = blue!10, outerlinecolor = red!70!black, innertopmargin = .5em, skipabove = 1.em, splittopskip = \topskip,]{corollary}[definition]{Corollary}


%Math Symbols
\DeclareMathOperator{\real}{Re}%real part
\DeclareMathOperator{\im}{im}%image part
\DeclareMathOperator{\sgn}{sgn}%sign permutation
\DeclareMathOperator{\id}{\mathbf{1}}%identity map
\DeclareMathOperator{\spans}{span}%spans space
\DeclareMathOperator{\rank}{rank}%rank













